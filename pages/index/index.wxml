
<view class="search-bar">
    <input type="text" placeholder="输入材料" bindinput="onSearchInput"/>
    <button bindtap="onSearchButton">搜索</button>
</view>
<view class="container">

  

  <scroll-view class="sidebar" scroll-y="true">
  <block wx:for="{{foodTypes}}" wx:key="*this">
    <view 
      bindtap="changeType" 
      data-type="{{item}}" 
      class="foodType {{selectedFoodType == item ? 'foodType-selected' : ''}}"
    >
      {{item}}
    </view>
  </block>
</scroll-view>

<scroll-view class="foods" scroll-y="true" lazy-load='true' scroll-into-view="{{scrollToFood}}">
  <!-- <scroll-view class="foods" scroll-y="true" lazy-load='true' scroll-into-view="{{scrollToFood}}" bindscroll="scroll"> -->
        <block wx:for="{{currentFoods}}" wx:key="name"> <!-- change key to a unique property -->
          <view class="food-item" id="{{item.index}}">
            <image class="avatar" src="{{item.avatar}}" mode="aspectFit" />
            <view class="info">
              <text>{{item.name}}</text>
              <text>¥{{item.price}}</text>
            </view>
    <!-- ...existing code... -->
    <view class="controls">
      <text bindtap="decreaseOrder" data-name="{{item.name}}" class="minus" wx:if="{{item.quantity > 0}}">-</text>
      <text class="quantity" wx:if="{{item.quantity > 0}}">{{item.quantity}}</text>
      <text bindtap="increaseOrder" data-name="{{item.name}}" class="plus" wx:if="{{item.quantity > 0}}">+</text>
      <text bindtap="increaseOrder" data-name="{{item.name}}" class="plus" wx:else>+</text>
    </view>



          </view>
        </block>
  </scroll-view>
</view>
  <!-- Add the footer bar -->
  <view class="footer">
    <view class="total-price">总成本: ¥{{totalPrice}}</view>
    <button class="clear-btn2" bindtap="clearOrder">清空</button>
    <view class="empty-space"></view>
    <button class="total-btn" bindtap="showModal">计算</button>
  </view>

  <!-- Add the modal window -->
  <view class="modal" hidden="{{!showModal}}">
    <view class="modal-container"> <!-- Add this wrapper -->
  <view class="modal-header">
    <!-- <text class="modal-title"></text> -->
    <button class="clear-btn" bindtap="clearOrder">清空</button> 
    <button class="close-btn" bindtap="hideModal">返回</button>
  </view>
  <view class="modal-content">
    <block wx:for="{{cartFoods}}" wx:key="name">
      <view class="cart-item">
        <image class="avatar" src="{{item.avatar}}" mode="aspectFit" />
        <view class="info info-row">
          <text>{{item.name}}</text>
          <view class="controls controls-row">
            <text class="minus" bindtap="decreaseOrder" data-name="{{item.name}}">-</text>
            <text>{{item.quantity}}</text>
            <text class="plus" bindtap="increaseOrder" data-name="{{item.name}}">+</text>
          </view>
        </view>
      </view>

      
    </block>

  <view class="price-per-person">
  <view class="total-price2">
    <text>总成本: ¥ </text>
  <view class="input-price-2">
  {{totalPrice}}
  </view>
    <view class="total-price2-text-margin">
        <text>倍数：{{pricePerPerson}} </text>
    </view>
   </view>
  </view>

    <view class="price-per-person">
      <text>订单价: ¥ </text>
      <input class="input-price" type="number" bindinput="handlePriceInput" placeholder="0" value="{{displayBookPrice}}"/>
      <view class="total-price-margin2">
        <text>总额: ¥{{totalBookPrice}} </text>
      </view>
    </view>
    <view class="price-per-person">
      <text>加成: ¥ </text>
      <input class="input-price" type="number" bindinput="addBookPrice" placeholder="0" value="{{displayPrice}}"/>
    </view>

  </view>
</view>
<!-- <ad unit-id="adunit-0f098ebe2f7a075d"></ad> -->


</view>

